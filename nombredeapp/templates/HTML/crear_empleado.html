{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Nuevo Empleado</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{% static 'CSS/crear_empleado_styles.css' %}">
</head>
<body 
    data-inicio-url="{% url 'inicio' %}"
    data-add-icon-url="{% static 'iconos/add_circle.png' %}"
    data-remove-icon-url="{% static 'iconos/remove_circle.png' %}"
    data-api-areas-url="{% url 'api_areas' %}"
    data-api-puestos-por-area-url="/api/puestos/"
    data-api-registrar-empleado-url="{% url 'api_registrar_empleado' %}">

<div class="form-container">
    <h1>Añadir Nuevo Empleado</h1>

    <!-- SECCIÓN 1: DATOS PERSONALES -->
    <div class="section">
        <h2 class="section-title">📋 Datos Personales</h2>
        <div class="personal-data-grid">
            <div class="photo-uploader" id="photo-uploader">
                <input type="file" id="photo-input" accept="image/*" style="display: none;">
                <button type="button" id="photo-button">Añadir Foto</button>
            </div>
            <div class="fields-grid">
                <div class="form-group">
                    <label for="nombre">Nombre: <span class="required">*</span></label>
                    <input type="text" id="nombre" required>
                </div>
                <div class="form-group">
                    <label for="apellido">Apellido: <span class="required">*</span></label>
                    <input type="text" id="apellido" required>
                </div>
                <div class="form-group">
                    <label for="dni">DNI: <span class="required">*</span></label>
                    <input type="text" id="dni" required>
                </div>
                <div class="form-group">
                    <label for="email">Email: <span class="required">*</span></label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="telefono">Teléfono:</label>
                    <input type="text" id="telefono">
                </div>
                <div class="form-group">
                    <label for="cod_pais">Código Telefónico:</label>
                    <input type="text" id="cod_pais" value="+54">
                </div>
                <div class="form-group">
                    <label for="direccion">Dirección:</label>
                    <input type="text" id="direccion">
                </div>
                <div class="form-group">
                    <label for="fecha_nacimiento">Fecha de Nacimiento:</label>
                    <input type="text" id="fecha_nacimiento" placeholder="DD/MM/AAAA">
                </div>
            </div>
        </div>
        <div class="form-actions-initial">
            <button type="button" id="btn-add-laboral" class="btn btn-secondary">Añadir datos laborales</button>
        </div>
    </div>

    <!-- SECCIÓN 2: DATOS LABORALES -->
    <div id="laboral-data" class="laboral-data">
        <div class="section">
            <h2 class="section-title">💼 Datos Laborales</h2>
            <div class="area-puesto">
                <div class="form-group" style="flex-grow: 1;">
                    <label>Área: <span class="required">*</span></label>
                    <button type="button" id="btn-area" class="selector-btn">Selecciona un área</button>
                </div>
                <div class="form-group" style="flex-grow: 1;">
                    <label>Puesto: <span class="required">*</span></label>
                    <button type="button" id="btn-puesto" class="selector-btn" disabled>Selecciona un puesto</button>
                </div>
            </div>
            <div class="permisos-info" id="permisos-info" style="display: none;">
                <h3>🔒 Permisos del Puesto</h3>
                <div id="permisos-display" class="permisos-display"></div>
            </div>
        </div>
        
        <!-- SECCIÓN 3: HORARIO -->
        <div class="section schedule-section">
            <h2 class="section-title">🕐 Horario Semanal Recurrente</h2>
            <div class="color-palette-container">
                <span>Mismo horario para:</span>
                <div id="color-palette" class="color-palette"></div>
                <button type="button" id="add-color" class="add-btn">
                    <img src="{% static 'iconos/add_circle.png' %}" alt="Añadir color">
                </button>
            </div>
            <div id="schedule-container"></div>
            <div class="daily-schedule-container" id="daily-schedule-container"></div>
        </div>
    </div>

    <!-- BOTONES FINALES -->
    <div class="main-form-actions">
        <button type="button" id="btn-cancel" class="btn btn-danger">
            <i class="fas fa-times"></i> Cancelar
        </button>
        <button type="button" class="btn btn-success" id="btn-listo">
            <i class="fas fa-check"></i> Listo
        </button>
    </div>
</div>

<!-- MODAL PARA SELECCIONAR ÁREA/PUESTO -->
<div id="modal-seleccionar" class="modal-overlay">
    <div class="modal-content">
        <h2 id="seleccionar-titulo"></h2>
        <input type="text" id="searchInput" placeholder="Buscar...">
        <ul id="resultsList"></ul>
        <div class="modal-actions">
            <button type="button" class="btn btn-light" id="btn-seleccionar-volver">Cerrar</button>
        </div>
    </div>
</div>

<!-- CARGAR SISTEMA DE AUDIO PRIMERO -->
<script src="{% static 'JS/audio-system.js' %}"></script>
<!-- LUEGO CARGAR EL SCRIPT PRINCIPAL -->
<script src="{% static 'JS/crear_empleado.js' %}"></script>
</body>
</html>